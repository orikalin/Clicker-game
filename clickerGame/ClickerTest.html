<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="clicker_ss.css">
    <title>dragon clicker</title>
</head>

<body>
    <!--
        1. Build the page
            -dragon sprite area
            -player sprite area
            -background area
            -shop area
            -guild area
    -->


    <div class="nav" id="nav"></div>

    <div class="wrapper" id="wrapper">
        <canvas id="canvasDragon" class="canvasDragon" width="600" height="500"></canvas>
        <div class="borderPins">
            <div class="borderPinHL1"></div>
            <div class="borderPinHL2"></div>
            <div class="borderPinHR1"></div>
            <div class="borderPinFull"></div>
            <div class="borderPinBot1"></div>
            <div class="borderPinBot2"></div>
            <div class="borderPinBot3"></div>
            <div class="borderPinTop1"></div>
            <div class="borderPinTop2"></div>
            <div class="borderPinTop3"></div>

        </div>
        <div class="borders">
            <div class="hBorder1"></div>
            <div class="hBorder2"></div>
            <div class="vBorder1"></div>
            <div class="vBorder2"></div>
            <div class="vBorder3"></div>
        </div>
        <div class="leftSection" id="leftSection">
            <div class="dragonArea" id="dragonArea">
                <div class="goldWrapper">
                    <div id="goldDisplay" class="goldDisplay"> Gold: 0</div>
                    <div id="gpsDisplay" class="gpsDisplay" style="font-size:50%;">Gold per second : 0</div>
                </div>
                <div class="dragonAnchor">
                    <div id="theDragon" class="theDragon" onclick="dClicked()"></div>
                </div>
            </div>

            <div class="playerArea" id="playerArea">
                <div class="namePlate">
                    <div id="changeNamePlate" onclick="changeName()">Change</div>
                    <div class="playerName"></div>
                </div>
                <div id="stats" class="stats">character stats go in here<br>damage, health, crit, etc<br>need graphics</div>
                <div class="playerAnchor">
                    <div id="thePlayer" class="thePlayer"></div>
                </div>
            </div>
        </div>
        <div class="shopSection" id="shopSection">
            <div class="shopHeader">Shop graphics go here</div>
            <div class="shopWrapper">
                <div class="theShop">things to buy in here
                    <div class="exampleItem"></div>
                </div>
            </div>
        </div>
        <div id="guildSection" class="guildSection">
            <div class="guildHeader">Guild graphics go here</div>
            <div class="guildWrapper">
                <div class="theGuild">
                    <div id="newbs" class="newbs shadowed" onclick="buyNewb()">
                        <div class="newbCount gCount">0</div>
                        <div class="newbCost gCost">10</div>
                    </div>
                    <div id="mercs" class="mercs shadowed guildHidden" onclick="buyMerc()">
                        <div class="mercCount gCount"></div>
                        <div class="mercCost gCost"></div>


                    </div>
                </div>
            </div>
        </div>


    </div>
    <script>
        //recruits will add gold per second
        //items will add gold per click, and in some cases imrpove recuits
        //each recruit needs a base GPS value and there needs to be a function to
        //calculate how much GPS you get from the # of recuits + the upgrades

        //upgrades need to be stored in a global variable so I can access them
        //in multiple places

        //r1
        //r2
        //r3
        function $(c) {
            return document.querySelector(c)
        }
        var gold = 0
        var upgrades = 0
        var gpc = 1
        var gps = 0
        var gDisplay = $(".goldDisplay")
        var playerName = $(".playerName")
        var newbCount = 0
        var newbCost = 10
        var newbUps = 0
        var mercCost = 1000
        var mercUps = 0
        var mercCount = 0
        var newbs = document.getElementById("newbs")

        var dCanvas = document.getElementById("canvasDragon")
        var ctx = dCanvas.getContext("2d")

        function dClicked() {

            gold = gold + gpc
            gDisplay.innerHTML = `Gold: ${gold.toFixed(0)}`
        }

        setInterval(function() {
            if (newbCost <= gold) {
                newbs.classList.remove("shadowed")
            } else {
                newbs.classList.add("shadowed")
            }
            if (mercCost <= gold) {
                mercs.classList.remove("shadowed")
            } else {
                mercs.classList.add("shadowed")
            }
            gold = gold + (gps / 10)
            gDisplay.innerHTML = `Gold: ${gold.toFixed(0)}`
            gpsDisplay.innerHTML = `Gold per second : ${gps}`
            if (gold * 2 >= mercCost) {
                mercs.classList.remove("guildHidden")
                $(".mercCount").innerText = mercCount
                $(".mercCost").innerText = mercCost
            }
            gpc = 1 + Number((gps * 0.01).toFixed(0))
        }, 100)

        function changeName() {
            playerName.innerText = prompt("What is your name?")
        }

        function buyNewb() {
            if (gold >= newbCost) {
                gold = gold - newbCost
                newbCount = newbCount + 1
                newbCost = newbCost + Number((newbCost * 0.05).toFixed(0))
                $(".newbCount").innerText = newbCount
                $(".newbCost").innerText = newbCost
                gps = gps + 1 + newbUps
                gDisplay.innerHTML = `Gold: ${gold.toFixed(0)}`
                gpsDisplay.innerHTML = `Gold per second : ${gps}`
            }

        }

        function buyMerc() {
            if (gold >= mercCost) {
                gold = gold - mercCost
                mercCount = mercCount + 1
                mercCost = mercCost + Number((mercCost * 0.15).toFixed(0))
                $(".mercCount").innerText = mercCount
                $(".mercCost").innerText = mercCost
                gps = gps + 100 + mercUps
                gDisplay.innerHTML = `Gold: ${gold.toFixed(0)}`
                gpsDisplay.innerHTML = `Gold per second : ${gps}`
            }

        }
    </script>
</body>

</html>